var ShopCartConst,ShopCart,store;function getElemData(t,e){return t.dataset?t.dataset[e]:t.getAttribute(ShopCartConst.PREFIX_DATA+e)}function getParam(t){var e=window.location.href;t=t.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).store=t()}}(function(){return function a(o,s,c){function u(r,t){if(!s[r]){if(!o[r]){var e="function"==typeof require&&require;if(!t&&e)return e(r,!0);if(l)return l(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var i=s[r]={exports:{}};o[r][0].call(i.exports,function(t){var e=o[r][1][t];return u(e||t)},i,i.exports,a,o,s,c)}return s[r].exports}for(var l="function"==typeof require&&require,t=0;t<c.length;t++)u(c[t]);return u}({1:[function(t,e,r){"use strict";var n=t("../src/store-engine"),i=[t("../storages/localStorage"),t("../storages/sessionStorage"),t("../storages/cookieStorage"),t("../storages/memoryStorage")];e.exports=n.createStore(i,[])},{"../src/store-engine":2,"../storages/cookieStorage":4,"../storages/localStorage":5,"../storages/memoryStorage":6,"../storages/sessionStorage":7}],2:[function(t,e,r){"use strict";function n(t,e,r){r||(r=""),t&&!p(t)&&(t=[t]),e&&!p(e)&&(e=[e]);var n=r?"__storejs_"+r+"_":"",i=r?new RegExp("^"+n):null;if(!/^[a-zA-Z0-9_\-]*$/.test(r))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var a=l({_namespacePrefix:n,_namespaceRegexp:i,_testStorage:function(t){try{var e="__storejs__test__";t.write(e,e);var r=t.read(e)===e;return t.remove(e),r}catch(t){return!1}},_assignPluginFnProp:function(n,t){var i=this[t];this[t]=function(){var r=o(arguments,0),t=this,e=[function(){if(i)return c(arguments,function(t,e){r[e]=t}),i.apply(t,r)}].concat(r);return n.apply(t,e)}},_serialize:function(t){return JSON.stringify(t)},_deserialize:function(e,t){if(!e)return t;var r="";try{r=JSON.parse(e)}catch(t){r=e}return void 0!==r?r:t},_addStorage:function(t){this.enabled||this._testStorage(t)&&(this.storage=t,this.enabled=!0)},_addPlugin:function(r){var n=this;if(p(r))c(r,function(t){n._addPlugin(t)});else if(!s(this.plugins,function(t){return r===t})){if(this.plugins.push(r),!h(r))throw new Error("Plugins must be function values that return objects");var t=r.call(this);if(!m(t))throw new Error("Plugins must return an object of function properties");c(t,function(t,e){if(!h(t))throw new Error("Bad plugin property: "+e+" from plugin "+r.name+". Plugins should only return functions.");n._assignPluginFnProp(t,e)})}},addStorage:function(t){(function(){var t="undefined"==typeof console?null:console;t&&(t.warn?t.warn:t.log).apply(t,arguments)})("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(t)}},d,{plugins:[]});return a.raw={},c(a,function(t,e){h(t)&&(a.raw[e]=u(a,t))}),c(t,function(t){a._addStorage(t)}),c(e,function(t){a._addPlugin(t)}),a}var i=t("./util"),o=i.slice,s=i.pluck,c=i.each,u=i.bind,l=i.create,p=i.isList,h=i.isFunction,m=i.isObject,d={version:"2.0.12",enabled:!(e.exports={createStore:n}),get:function(t,e){var r=this.storage.read(this._namespacePrefix+t);return this._deserialize(r,e)},set:function(t,e){return void 0===e?this.remove(t):(this.storage.write(this._namespacePrefix+t,this._serialize(e)),e)},remove:function(t){this.storage.remove(this._namespacePrefix+t)},each:function(r){var n=this;this.storage.each(function(t,e){r.call(n,n._deserialize(t),(e||"").replace(n._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(t){return this._namespacePrefix=="__storejs_"+t+"_"},createStore:function(){return n.apply(this,arguments)},addPlugin:function(t){this._addPlugin(t)},namespace:function(t){return n(this.storage,this.plugins,t)}}},{"./util":3}],3:[function(t,u,e){(function(t){"use strict";function o(t,e){return Array.prototype.slice.call(t,e||0)}function a(t,r){e(t,function(t,e){return r(t,e),!1})}function e(t,e){if(i(t)){for(var r=0;r<t.length;r++)if(e(t[r],r))return t[r]}else for(var n in t)if(t.hasOwnProperty(n)&&e(t[n],n))return t[n]}function i(t){return null!=t&&"function"!=typeof t&&"number"==typeof t.length}var s=Object.assign?Object.assign:function(r,t,e,n){for(var i=1;i<arguments.length;i++)a(Object(arguments[i]),function(t,e){r[e]=t});return r},r=function(){if(Object.create)return function(t,e,r,n){var i=o(arguments,1);return s.apply(this,[Object.create(t)].concat(i))};var a=function(){};return function(t,e,r,n){var i=o(arguments,1);return a.prototype=t,s.apply(this,[new a].concat(i))}}(),n=String.prototype.trim?function(t){return String.prototype.trim.call(t)}:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},c="undefined"!=typeof window?window:t;u.exports={assign:s,create:r,trim:n,bind:function(t,e){return function(){return e.apply(t,Array.prototype.slice.call(arguments,0))}},slice:o,each:a,map:function(t,r){var n=i(t)?[]:{};return e(t,function(t,e){return n[e]=r(t,e),!1}),n},pluck:e,isList:i,isFunction:function(t){return t&&"[object Function]"==={}.toString.call(t)},isObject:function(t){return t&&"[object Object]"==={}.toString.call(t)},Global:c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(t,e,r){"use strict";function n(t){for(var e=u.cookie.split(/; ?/g),r=e.length-1;0<=r;r--)if(c(e[r])){var n=e[r].split("="),i=unescape(n[0]);t(unescape(n[1]),i)}}function i(t){t&&a(t)&&(u.cookie=escape(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function a(t){return new RegExp("(?:^|;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(u.cookie)}var o=t("../src/util"),s=o.Global,c=o.trim;e.exports={name:"cookieStorage",read:function(t){if(!t||!a(t))return null;var e="(?:^|.*;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(u.cookie.replace(new RegExp(e),"$1"))},write:function(t,e){t&&(u.cookie=escape(t)+"="+escape(e)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")},each:n,remove:i,clearAll:function(){n(function(t,e){i(e)})}};var u=s.document},{"../src/util":3}],5:[function(t,e,r){"use strict";function n(){return a.localStorage}function i(t){return n().getItem(t)}var a=t("../src/util").Global;e.exports={name:"localStorage",read:i,write:function(t,e){return n().setItem(t,e)},each:function(t){for(var e=n().length-1;0<=e;e--){var r=n().key(e);t(i(r),r)}},remove:function(t){return n().removeItem(t)},clearAll:function(){return n().clear()}}},{"../src/util":3}],6:[function(t,e,r){"use strict";e.exports={name:"memoryStorage",read:function(t){return n[t]},write:function(t,e){n[t]=e},each:function(t){for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},remove:function(t){delete n[t]},clearAll:function(t){n={}}};var n={}},{}],7:[function(t,e,r){"use strict";function n(){return a.sessionStorage}function i(t){return n().getItem(t)}var a=t("../src/util").Global;e.exports={name:"sessionStorage",read:i,write:function(t,e){return n().setItem(t,e)},each:function(t){for(var e=n().length-1;0<=e;e--){var r=n().key(e);t(i(r),r)}},remove:function(t){return n().removeItem(t)},clearAll:function(){return n().clear()}}},{"../src/util":3}]},{},[1])(1)}),function(t){t.STORAGE_CART="cart",t.STORAGE_UTM="utm",t.CLASS_BODY_CART_READY="cart-ready",t.CLASS_BODY_CART_OPEN="cart-open",t.CLASS_CART_ACTION="cart-action",t.CLASS_CART_EMPTY="empty",t.CLASS_CART_OPEN="open",t.SELECTOR_CART="#store-cart",t.SELECTOR_CART_ACTION=".cart-action",t.SELECTOR_CART_ITEM_LIST="#cart-item-list",t.SELECTOR_CART_TOTAL_PRICE=".cart-total-price",t.SELECTOR_CART_TOTAL_COUNT=".cart-total-count",t.ACTION_ADD="add",t.ACTION_REMOVE="remove",t.DATA_ACTION="action",t.DATA_UPC="upc",t.CLASS_ITEM_QUANTITY="quantity",t.CLASS_ITEM="cart-item",t.SELECTOR_ITEM_QUANTITY=".quantity",t.CLASS_ELEMENT_ACTIVE="active",t.SELECTOR_ELEMENT_CART_AREA=".cart-area",t.SELECTOR_ELEMENT_CART_NOTIFICATION=".cart-notification",t.PREFIX_CART_IMAGE="cart_",t.PREFIX_DATA="data-",t.PREFIX_ITEM="item-",t.ADD_EVT="shop-cart-add",t.REMOVE_EVT="shop-cart-remove",t.OPEN_EVT="shop-cart-open",t.CLOSE_EVT="shop-cart-close",t.INIT_EVT="shop-cart-init",t.READY_EVT="shop-cart-init"}(ShopCartConst||(ShopCartConst={})),function(i){i.CART_INVALID_BEFORE=1515076732673;var t=function(){function t(t,e){void 0===e&&(e=null),e?this.init(e):(this.id=this.getId(),this.createdAt=(new Date).getTime(),this.currency=t,this.items=[],this.total=0,this.quantity=0)}return t.prototype.setItem=function(e){var r=!1,n=0;return this.items.map(function(t){return t.item.upc==e.upc&&(t.quantity++,r=!0,n=t.quantity),t}),r||(this.items.push(new i.CartItem(e,1)),n=1),n},t.prototype.removeItem=function(e){var r=0;return this.items.map(function(t){return t.item.upc==e.upc&&(0<t.quantity&&t.quantity--,r=t.quantity),t}),r},t.prototype.init=function(t){this.id=t.id,this.createdAt=t.createdAt,this.currency=t.currency,this.total=t.total,this.quantity=t.quantity,this.initItems(t.items)},t.prototype.initItems=function(t){this.items=[];for(var e=0;e<t.length;e++)this.items.push(new i.CartItem(t[e].item,t[e].quantity))},t.prototype.getId=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()+"-"+Date.now()},t}();i.Cart=t;var n=["id","createdAt","total",,"quantity","items","currency"];i.isValidCart=function(t){if(!t||!t.createdAt||t.createdAt<i.CART_INVALID_BEFORE)return!1;for(var e=!0,r=0;r<n.length;r++)e=e&&(!n[r]||void 0!==t[n[r]]);return e}}(ShopCart||(ShopCart={})),function(e){var t=function(){function t(t){if(!t)throw new Error("Config is missing");this.store=new e.ConfigStore(t.store),this.image=new e.ConfigImage(t.image),this.currencies=t.currencies,this.currency=this.getDefaultCurrency(),this.products=t.products,this.selector=new e.ConfigSelector(t.selector),this.selectorClass=new e.ConfigSelectorClass(t.selectorClass)}return t.prototype.getDefaultCurrency=function(){if(!this.currencies||0==this.currencies.length)return{name:"United States Dollar",label:"USD",code:"USD",symbol:"$",default:!0};var t=this.currencies.filter(function(t){return t.default});return t&&0!=t.length?t[0]:this.currencies[0]},t}();e.Config=t;var r=function(t){if(!t)throw new Error("Store config is missing");this.name=t.name,this.url=t.url};e.ConfigStore=r;var n=function(t){void 0===t&&(t=null),this.basePath=t&&t.basePath?t.basePath:"./images/",this.lazyload=Boolean(t.lazyload)};e.ConfigImage=n;var i=function(t){void 0===t&&(t=null),t||(t={cart:null,body:"body",element:null}),this.cart=new e.ConfigSelectorCart(t.cart),this.body=t.body,this.element=new e.ConfigSelectorElement(t.element)};e.ConfigSelector=i;var a=function(t){void 0===t&&(t=null),t||(t={cart:null,body:null,element:null}),this.cart=new e.ConfigSelectorClassCart(t.cart),this.body=new e.ConfigSelectorClassBody(t.body),this.element=new e.ConfigSelectorClassElement(t.element)};e.ConfigSelectorClass=a;var o=function(t){void 0===t&&(t=null),this.main=t&&t.main?t.main:ShopCartConst.SELECTOR_CART,this.total=t&&t.total?t.total:ShopCartConst.SELECTOR_CART_TOTAL_PRICE,this.count=t&&t.count?t.count:ShopCartConst.SELECTOR_CART_TOTAL_COUNT};e.ConfigSelectorCart=o;var s=function(t){void 0===t&&(t=null),this.open=t&&t.open?t.open:ShopCartConst.CLASS_CART_OPEN,this.empty=t&&t.empty?t.empty:ShopCartConst.CLASS_CART_EMPTY};e.ConfigSelectorClassCart=s;var c=function(t){void 0===t&&(t=null),this.cartReady=t&&t.cartReady?t.cartReady:ShopCartConst.CLASS_BODY_CART_READY,this.cartOpen=t&&t.cartOpen?t.cartOpen:ShopCartConst.CLASS_BODY_CART_OPEN};e.ConfigSelectorClassBody=c;var u=function(t){void 0===t&&(t=null),this.main=t&&t.main?t.main:ShopCartConst.SELECTOR_ELEMENT_CART_AREA,this.notification=t&&t.notification?t.notification:ShopCartConst.SELECTOR_ELEMENT_CART_NOTIFICATION};e.ConfigSelectorElement=u;var l=function(t){void 0===t&&(t=null),this.active=t&&t.active?t.active:ShopCartConst.CLASS_ELEMENT_ACTIVE};e.ConfigSelectorClassElement=l}(ShopCart||(ShopCart={})),function(a){a.variantProductMap=[],a.productVariantsImageMap=[],a.variantMap=[];var t=function(){function t(t,e,r){if(void 0===e&&(e=null),void 0===r&&(r=null),!t)throw Error("Store configuration is missing");if(!e){if(!window.store)throw Error("Storage is missing");e=window.store}r||(r=window.store.get(ShopCartConst.STORAGE_CART)),this.dispatcher=new a.Dispatcher,this.dispatcher.init(),this.setConfig(t),this.storage=e,this.setUtm(),r=a.isValidCart(r)?new a.Cart(r.currency,r):new a.Cart(this.config.currency),this.cart=r,this.setTotal(),this.ready()}return t.prototype.getItem=function(t){var e=a.variantProductMap[t],r=a.variantMap[t];return t&&e&&r?new a.Item(t,e,r):null},t.prototype.setItem=function(t){var e=this.getItem(t);if(!e)return null;var r=this.cart.setItem(e);return this.dispatcher.add(t),this.openCart(),this.setTotal(),r},t.prototype.removeItem=function(t){var e=this.getItem(t);if(!e)return null;var r=this.cart.removeItem(e);return this.dispatcher.remove(t),this.setTotal(),r},t.prototype.getCheckoutUrl=function(){var t=this.config.store.url;"/"!=t[t.length-1]&&(t+="/");var e=t+"cart/";if(this.cart.quantity<=0)return null;for(var r=0;r<this.cart.items.length;r++)this.cart.items[r].quantity<=0||(e+=this.cart.items[r].item.upc+":"+this.cart.items[r].quantity+",");return this.utm&&0<this.utm.length&&(e+="?",this.utm.forEach(function(t){e+=t.key+"="+t.value+"&"})),e},t.prototype.openCart=function(){this.updateCartQuantities(),this.elementLoop(this.config.selector.cart.main,function(t,e){if(!(0<=t.className.indexOf(e.config.selectorClass.cart.open))){t.className+=" "+e.config.selectorClass.cart.open;for(var r=0;r<e.cart.items.length;r++)if(0<e.cart.items[r].quantity)e.createCartItem(e.cart.items[r])}}),document.body.className.indexOf(this.config.selectorClass.body.cartOpen)<0&&(document.body.className+=" "+this.config.selectorClass.body.cartOpen,this.dispatcher.open())},t.prototype.elementLoop=function(t,e){for(var r=document.querySelectorAll(t),n=0;n<r.length;n++)e(r[n],this)},t.prototype.registerCartItemEvents=function(t){for(var e=t.querySelectorAll(ShopCartConst.SELECTOR_CART_ACTION),r=0;r<e.length;r++)this.registerCartActionEvent(e[r]),this.events[getElemData(e[r],ShopCartConst.DATA_UPC)+"-"+getElemData(e[r],ShopCartConst.DATA_ACTION)]=!0;e=t.querySelectorAll("input"+ShopCartConst.SELECTOR_ITEM_QUANTITY);for(r=0;r<e.length;r++)this.registerCartUpdateEvent(e[r])},t.prototype.registerCartUpdateEvent=function(t){var n=this;t.addEventListener("input",function(t){var e=t.target.value;if(e){var r=parseInt(e);if(isNaN(r))return;n.setItemQuantity(getElemData(t.target,ShopCartConst.DATA_UPC),r)}})},t.prototype.registerCartActionEvent=function(t){var r=this;this.events||(this.events={}),this.events[getElemData(t,ShopCartConst.DATA_UPC)]||(this.events[getElemData(t,ShopCartConst.DATA_UPC)+"-"+getElemData(t,ShopCartConst.DATA_ACTION)]=!0,t.addEventListener("click",function(t){var e=getElemData(t.target,ShopCartConst.DATA_UPC);switch(getElemData(t.target,ShopCartConst.DATA_ACTION)){case ShopCartConst.ACTION_ADD:r.setItem(e);r.updateCartQuantities();break;case ShopCartConst.ACTION_REMOVE:r.removeItem(e);r.updateCartQuantities()}}))},t.prototype.setItemQuantity=function(e,r){var t=this.getItem(e);if(!t)return null;var n=!1,i=0;return this.cart.items.map(function(t){return t.item.upc==e&&(t.quantity=r,n=!0,i=t.quantity),t}),n||(this.cart.items.push(new a.CartItem(t,r)),i=1),this.openCart(),this.setTotal(),i},t.prototype.createCartItem=function(t){if(0<t.quantity&&!document.getElementById(ShopCartConst.PREFIX_ITEM+t.item.upc)){var e=document.createElement("div");e.className=ShopCartConst.CLASS_ITEM,e.id=ShopCartConst.PREFIX_ITEM+t.item.upc,e.innerHTML=t.getTemplate(this.config),document.querySelector(ShopCartConst.SELECTOR_CART_ITEM_LIST).appendChild(e),this.registerCartItemEvents(e)}else this.updateItemQuantity(t)},t.prototype.updateCartQuantities=function(){for(var t=0;t<this.cart.items.length;t++)this.createCartItem(this.cart.items[t]),this.updateItemQuantity(this.cart.items[t])},t.prototype.updateItemQuantity=function(t){var e=document.querySelectorAll("#"+ShopCartConst.PREFIX_ITEM+t.item.upc),r=document.querySelectorAll("#"+ShopCartConst.PREFIX_ITEM+t.item.upc+" "+ShopCartConst.SELECTOR_ITEM_QUANTITY);if(r&&0<r.length){if(t.quantity<=0)return void document.querySelector(ShopCartConst.SELECTOR_CART_ITEM_LIST).removeChild(e[0]);for(var n=0;n<r.length;n++)r[n].value=t.quantity.toString()}},t.prototype.setTotal=function(){for(var t=0,e=0,r=0;r<this.cart.items.length;r++)t+=this.cart.items[r].item.product.price*this.cart.items[r].quantity,e+=0<this.cart.items[r].quantity?this.cart.items[r].quantity:0;return this.cart.total=t,this.cart.quantity=e,this.updateCartTotal(),this.updateCart(),t},t.prototype.setUtm=function(){this.utm=this.getUrlUtm(),this.utm&&0<this.utm.length?this.storage.set(ShopCartConst.STORAGE_UTM,this.utm):this.utm=this.getUtm()},t.prototype.getUtm=function(){return this.storage.get(ShopCartConst.STORAGE_UTM)},t.prototype.getUrlUtm=function(){var r=[],t=window.location.href.trim();if(t.indexOf("?")<0||t.indexOf("utm_")<0)return r;var e=t.split("?")[1],n=new RegExp("^utm_?[a-zA-Z0-9]*");return e.split("&").forEach(function(t){if(n.test(t)){var e=t.split("=");r.push(new a.Utm(e[0],e[1]))}}),r},t.prototype.updateCart=function(){this.storage.set(ShopCartConst.STORAGE_CART,this.cart),this.updateCartNotification(),this.updateCartCheckoutButton(),this.updateCartActive()},t.prototype.updateCartTotal=function(){for(var t=document.querySelectorAll(this.config.selector.cart.total),e=0;e<t.length;e++)t[e].innerHTML=this.cart.total.toFixed(2)+" "+this.cart.currency.label;for(t=document.querySelectorAll(this.config.selector.cart.count),e=0;e<t.length;e++)t[e].innerHTML=this.cart.quantity.toString()},t.prototype.updateCartCheckoutButton=function(){this.elementLoop(this.config.selector.cart.main,function(t,e){0<e.cart.quantity?(t.className=t.className.replace(e.config.selectorClass.cart.empty,"").trim(),e.setCartProductClass()):t.className.indexOf(e.config.selectorClass.cart.empty)<0&&(t.className+=" "+e.config.selectorClass.cart.empty)})},t.prototype.setCartProductClass=function(){this.elementLoop(this.config.selector.cart.main,function(t,e){for(var r=0;r<e.config.products.length;r++){var n=e.config.products[r].id;t.className=t.className.replace(n,"").trim()}for(r=0;r<e.cart.items.length;r++)if(0<e.cart.items[r].quantity){var i=a.variantProductMap[e.cart.items[r].item.upc];t.className.indexOf(i.id)<0&&(t.className+=" "+i.id)}})},t.prototype.updateCartActive=function(){this.elementLoop(this.config.selector.element.main,function(t,e){0<e.cart.quantity?t.className.indexOf(e.config.selectorClass.element.active)<0&&(t.className+=" "+e.config.selectorClass.element.active):t.className=t.className.replace(e.config.selectorClass.element.active,"").trim()})},t.prototype.updateCartNotification=function(){this.elementLoop(this.config.selector.element.notification,function(t,e){0<e.cart.quantity?(t.innerHTML=e.cart.quantity.toString(),t.className.indexOf(e.config.selectorClass.element.active)<0&&(t.className+=" "+e.config.selectorClass.element.active)):t.className=t.className.replace(e.config.selectorClass.element.active,"").trim()})},t.prototype.ready=function(){return this.dispatcher.ready(),document.body.className+=" "+this.config.selectorClass.body.cartReady},t.prototype.setConfig=function(t){if(!t.store||!t.store.url)throw Error("Store url is missing");this.config=new a.Config(t);for(var e=0;e<t.products.length;e++)for(var r=t.products[e],n=0;n<r.variants.length;n++)a.variantProductMap[r.variants[n].upc]=new a.Product(r.id,r.name,r.price,r.description,r.image.url),a.productVariantsImageMap[r.variants[n].upc]=new a.ProductImage(r.variants[n].image.url),a.variantMap[r.variants[n].upc]=new a.ProductVariant(r.variants[n].name,r.variants[n].upc,r.variants[n].sku,r.variants[n].size,r.variants[n].image.url)},t}();a.CartController=t}(ShopCart||(ShopCart={})),function(t){var e=function(){};(ShopCart||(ShopCart={})).Currency=e}(),function(t){var e=function(){function t(){this.polyfill(),this.addEvtRepo={},this.removeEvtRepo={},this.openEvt=this.createEvt(ShopCartConst.OPEN_EVT),this.closeEvt=this.createEvt(ShopCartConst.CLOSE_EVT),this.initEvt=this.createEvt(ShopCartConst.INIT_EVT),this.readyEvt=this.createEvt(ShopCartConst.READY_EVT)}return t.prototype.add=function(t){return this.addEvtRepo[t]||(this.addEvtRepo[t]=this.createEvt(ShopCartConst.ADD_EVT,t.toString())),window.dispatchEvent(this.addEvtRepo[t])},t.prototype.remove=function(t){return this.removeEvtRepo[t]||(this.removeEvtRepo[t]=this.createEvt(ShopCartConst.REMOVE_EVT,t.toString())),window.dispatchEvent(this.removeEvtRepo[t])},t.prototype.open=function(){if(this.openEvt)return window.dispatchEvent(this.openEvt)},t.prototype.close=function(){if(this.closeEvt)return window.dispatchEvent(this.closeEvt)},t.prototype.init=function(){if(this.initEvt)return window.dispatchEvent(this.initEvt)},t.prototype.ready=function(){if(this.readyEvt)return window.dispatchEvent(this.readyEvt)},t.prototype.createEvt=function(t,e){return void 0===e&&(e=null),new window.CustomEvent(t,{detail:e})},t.prototype.polyfill=function(){if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),r}t.prototype=window.Event.prototype,window.CustomEvent=t},t}();t.Dispatcher=e}(ShopCart||(ShopCart={})),function(a){var t=function(t,e,r){this.upc=t,this.product=e,this.productvariant=r};a.Item=t;var e=function(){function t(t,e){void 0===e&&(e=0),this.item=t,this.quantity=e}return t.prototype.getTemplate=function(t){void 0===t&&(t=null);var e="",r=a.variantProductMap[this.item.upc],n=a.productVariantsImageMap[this.item.upc],i=t&&t.image&&t.image.basePath?t.image.basePath:"./images/";return e+="<table><tr>",e+='<td class="product-image">',n&&n.url&&(e+='<img src="'+i+n.url+'">'),e+="</td>",e+='<td class="product-details"><div class="product-name">'+r.name+"</div>",this.item.productvariant.name&&(e+='<div class="item-name">Color: '+this.item.productvariant.name+"</div>"),this.item.productvariant.size&&(e+='<div class="item-size">Size: '+this.item.productvariant.size+"</div>"),e+='<div class="input-group">',e+='<button class="minus '+ShopCartConst.CLASS_CART_ACTION+'" data-upc="'+this.item.upc+'" data-sku="'+this.item.productvariant.sku+'" data-product="'+r.name+'" data-price="'+r.price+'" data-label="'+this.item.productvariant.name+'" data-action="remove"></button>',e+='<input class="'+ShopCartConst.CLASS_ITEM_QUANTITY+' form-control hidden-xs"  min="0" type="text" value="'+this.quantity+'" data-upc="'+this.item.upc+'"></input>',e+='<input class="'+ShopCartConst.CLASS_ITEM_QUANTITY+' form-control visible-xs" disabled="disabled"  min="0" type="text" value="'+this.quantity+'" data-upc="'+this.item.upc+'"></input>',e+='<button class="plus '+ShopCartConst.CLASS_CART_ACTION+'" data-upc="'+this.item.upc+'" data-sku="'+this.item.productvariant.sku+'" data-product="'+r.name+'" data-price="'+r.price+'" data-label="'+this.item.productvariant.name+'" data-action="add"></button>',e+="</div></td>",e+='<td class="product-price">',e+='<div class="item-price">'+r.price.toFixed(2)+"</div>",e+="</td>",e+="</tr></table>"},t}();a.CartItem=e}(ShopCart||(ShopCart={})),function(t){var o=function(){function t(t){this.url=t,this.setKey(this.url)}return t.prototype.setKey=function(t){if(t){var e=t.substring(t.lastIndexOf("/")+1),r=e.lastIndexOf(".");this.key=0<r?e.substr(0,r):e}},t}();t.ProductImage=o;var e=function(t,e,r,n,i){void 0===n&&(n=null),void 0===i&&(i=null),this.name=t,this.upc=e,this.sku=r,this.size=n,this.image=i?new o(i):null};t.ProductVariant=e;var r=function(t,e,r,n,i,a){void 0===n&&(n=null),void 0===i&&(i=null),void 0===a&&(a=null),this.id=t,this.name=e,this.price=r,this.description=n||"",this.image=i?new o(i):null,this.variants=a||[]};t.Product=r}(ShopCart||(ShopCart={})),function(t){var e=function(t,e){this.key=t,this.value=e};(ShopCart||(ShopCart={})).Utm=e}(),function(t){t.get(ShopCartConst.STORAGE_CART),getParam("clrstr");var e=getParam("cmpl"),r=getParam("t"),n=document.getElementById("page--thank-you");if(n){var i=parseInt(r);if(!r||!i||36e5<Date.now()-i)return window.location.search="",window.location.href=window.location.href.replace("thank-you","store");n.querySelector(".content").setAttribute("style","display: block;"),t.set(ShopCartConst.STORAGE_CART,null)}if(e){var a=parseFloat(atob(e));!function(){var r=window.analytics=window.analytics||[];if(!r.initialize)if(r.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{r.invoked=!0,r.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"],r.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(e),r.push(t),r}};for(var t=0;t<r.methods.length;t++){var e=r.methods[t];r[e]=r.factory(e)}r.load=function(t){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(e,r)},r.SNIPPET_VERSION="3.1.0",r.load("9JTlsxBVHmbQzf1gz8GFq0q1XILIFxZN");var n=window.localStorage.getItem("locale");n=Boolean(n)?n:"en-us",r.identify({locale:n}),r.track("Order Completed",{revenue:a})}}()}else{window.cartController=new ShopCart.CartController({store:{name:"Empatica Store",url:"https://store.empatica.com"},currencies:[{name:"United States Dollar",code:"USD",symbol:"$",label:"USD",default:!0}],image:{basePath:"https://www.empatica.com/assets/images/products/",lazyload:!0},products:[{id:"emb-watch",name:"Embrace Watch",description:"",price:249,image:{url:"cart_embrace_milan_black.png"},variants:[{name:"Milan Black",upc:26362578243,sku:"emb-mb-s",image:{url:"cart_embrace_milan_black.png"}},{name:"Boston Blue",upc:26363728899,sku:"emb-bb-s",image:{url:"cart_embrace_boston_blue.png"}},{name:"Flamingo Pink",upc:12580108355,sku:"emb-fp-s",image:{url:"cart_embrace_flamingo_pink.png"}},{name:"Sky Blue",upc:12580124419,sku:"emb-sb-s",image:{url:"cart_embrace_sky_blue.png"}},{name:"Seoul Grey",upc:12580108611,sku:"emb-sg-s",image:{url:"cart_embrace_seoul_grey.png"}}]},{id:"emb-band",name:"Embrace Stretchable Band",description:"",price:14.9,image:{url:"cart_band_milan_black"},variants:[{name:"Milan Black",upc:40904724931,sku:"ebnd-k-s",image:{url:"cart_band_milan_black.png"}},{name:"Boston Blue",upc:40904724995,sku:"ebnd-b-s",image:{url:"cart_band_boston_blue.png"}},{name:"Seoul Grey",upc:40904724867,sku:"ebnd-g-s",image:{url:"cart_band_seoul_grey.png"}}]},{id:"emb-charger",name:"Embrace Charging Dock",description:"",price:29.9,image:{url:"cart_charging_dock.png"},variants:[{name:"Embrace Charging Dock",upc:40903601667,sku:"emb-chrg",image:{url:"cart_charging_dock.png"}}]}]})}}(store);for(var list=document.querySelectorAll(".cart--add"),i=0;i<list.length;i++)list[i].addEventListener("click",function(t){if(t&&t.target){var e=t.target,r=e.dataset?e.dataset.upc:e.getAttribute("data-upc");window.cartController.setItem(r)}});var storeCart=document.getElementById("store-cart");for(list=document.querySelectorAll(".store-open"),i=0;i<list.length;i++)list[i].addEventListener("click",function(t){if(0<window.cartController.cart.quantity&&(t.preventDefault(),storeCart.className.indexOf("open")<0)){window.cartController.openCart();var e=new window.CustomEvent("store-cart-open");window.dispatchEvent(e)}});for(list=document.querySelectorAll(".cart-close"),i=0;i<list.length;i++)list[i].addEventListener("click",function(t){storeCart.className=storeCart.className.replace("open","").trim(),0<document.body.className.indexOf("cart-open")&&(document.body.className=document.body.className.replace("cart-open","").trim())});var checkout=document.getElementById("checkout");checkout&&checkout.addEventListener("click",function(){if(!(window.cartController.cart.quantity<=0)){var t=document.querySelectorAll(".cart-footer")[0];0<=t.className.indexOf("loading")||(t.className+=" loading",window.location.href=window.cartController.getCheckoutUrl(),window.setTimeout(function(){t.className=t.className.replace("loading","").trim()},1e4))}});